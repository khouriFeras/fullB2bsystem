{
  "title": "JafarShop – Delivery status webhook (updates our database)",
  "version": "1.0",
  "description": "When you send this webhook, we update the delivery status in our database for the order identified by ItemReferenceNo. Partners can then retrieve it via our API.",
  "webhook": {
    "method": "POST",
    "url": "https://webhooks.jafarshop.com/webhooks/wassel/status",
    "headers": {
      "Content-Type": "application/json",
      "Authorization": "Bearer <token we provide you>"
    },
    "success_response": {
      "status_code": 200,
      "body": { "ok": true }
    },
    "error_responses": {
      "400": "Invalid JSON or missing required fields (ItemReferenceNo, Status)",
      "401": "Missing or invalid Authorization header",
      "503": "Webhook not configured"
    }
  },
  "fields_used_to_update_database": {
    "required": {
      "ItemReferenceNo": "string – our order reference (e.g. Shopify order number like 1039, or our partner_order_id). We use this to find the order and update its last delivery status.",
      "Status": "integer – Wassel status code (see status_codes below). We store this and the matching label in our database."
    },
    "optional_stored": {
      "Waybill": "string – we store this if provided",
      "DeliveryImageUrl": "string – proof-of-delivery URL; we store this if provided (especially useful when Status is 170)"
    }
  },
  "status_codes": {
    "51": "Departed from origin – incoming",
    "56": "Arrival to gateway – incoming",
    "57": "Under clearance – incoming",
    "58": "Customs released – incoming",
    "60": "Assign driver to pick up",
    "100": "Picked up by driver",
    "120": "Item stored in warehouse",
    "121": "Departed to airport",
    "123": "Departed from origin – outgoing",
    "130": "Out for delivery",
    "170": "Delivered to customer",
    "180": "Returned from customer",
    "190": "Item returned to returned shelf",
    "210": "Returned to shipper (RTO)"
  },
  "payload_example": {
    "ItemReferenceNo": "1039",
    "Status": 170,
    "Waybill": "26020021000001",
    "DeliveryImageUrl": "https://example.com/proof.jpg"
  },
  "minimal_payload_example": {
    "ItemReferenceNo": "1039",
    "Status": 130
  },
  "note": "Send DeliveryImageUrl when Status is 170 (delivered) if you have proof-of-delivery. ItemReferenceNo must be the value we use to identify the order (we accept Shopify order number or our partner_order_id)."
}
